// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"fmt"
	"github.com/epilot-dev/terraform-provider-epilot-workflow/internal/sdk/internal/utils"
)

type Direction string

const (
	DirectionBefore Direction = "before"
	DirectionAfter  Direction = "after"
)

func (e Direction) ToPointer() *Direction {
	return &e
}
func (e *Direction) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "before":
		fallthrough
	case "after":
		*e = Direction(v)
		return nil
	default:
		return fmt.Errorf("invalid value for Direction: %v", v)
	}
}

type RelativeScheduleMode string

const (
	RelativeScheduleModeRelative RelativeScheduleMode = "relative"
)

func (e RelativeScheduleMode) ToPointer() *RelativeScheduleMode {
	return &e
}
func (e *RelativeScheduleMode) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "relative":
		*e = RelativeScheduleMode(v)
		return nil
	default:
		return fmt.Errorf("invalid value for RelativeScheduleMode: %v", v)
	}
}

type RelativeScheduleOrigin string

const (
	RelativeScheduleOriginFlowStarted            RelativeScheduleOrigin = "flow_started"
	RelativeScheduleOriginTaskCompleted          RelativeScheduleOrigin = "task_completed"
	RelativeScheduleOriginTriggerEntityAttribute RelativeScheduleOrigin = "trigger_entity_attribute"
)

func (e RelativeScheduleOrigin) ToPointer() *RelativeScheduleOrigin {
	return &e
}
func (e *RelativeScheduleOrigin) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "flow_started":
		fallthrough
	case "task_completed":
		fallthrough
	case "trigger_entity_attribute":
		*e = RelativeScheduleOrigin(v)
		return nil
	default:
		return fmt.Errorf("invalid value for RelativeScheduleOrigin: %v", v)
	}
}

type Reference struct {
	// An entity attribute that identifies a date / datetime
	Attribute *string `json:"attribute,omitempty"`
	// The id of the entity / workflow / task, based on the origin of the schedule
	ID     string                 `json:"id"`
	Origin RelativeScheduleOrigin `json:"origin"`
	// The schema of the entity
	Schema *string `json:"schema,omitempty"`
}

func (r Reference) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(r, "", false)
}

func (r *Reference) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &r, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (r *Reference) GetAttribute() *string {
	if r == nil {
		return nil
	}
	return r.Attribute
}

func (r *Reference) GetID() string {
	if r == nil {
		return ""
	}
	return r.ID
}

func (r *Reference) GetOrigin() RelativeScheduleOrigin {
	if r == nil {
		return RelativeScheduleOrigin("")
	}
	return r.Origin
}

func (r *Reference) GetSchema() *string {
	if r == nil {
		return nil
	}
	return r.Schema
}

type RelativeSchedule struct {
	Direction Direction            `json:"direction"`
	Duration  float64              `json:"duration"`
	Mode      RelativeScheduleMode `json:"mode"`
	Reference Reference            `json:"reference"`
	Unit      TimeUnit             `json:"unit"`
}

func (r RelativeSchedule) MarshalJSON() ([]byte, error) {
	return utils.MarshalJSON(r, "", false)
}

func (r *RelativeSchedule) UnmarshalJSON(data []byte) error {
	if err := utils.UnmarshalJSON(data, &r, "", false, nil); err != nil {
		return err
	}
	return nil
}

func (r *RelativeSchedule) GetDirection() Direction {
	if r == nil {
		return Direction("")
	}
	return r.Direction
}

func (r *RelativeSchedule) GetDuration() float64 {
	if r == nil {
		return 0.0
	}
	return r.Duration
}

func (r *RelativeSchedule) GetMode() RelativeScheduleMode {
	if r == nil {
		return RelativeScheduleMode("")
	}
	return r.Mode
}

func (r *RelativeSchedule) GetReference() Reference {
	if r == nil {
		return Reference{}
	}
	return r.Reference
}

func (r *RelativeSchedule) GetUnit() TimeUnit {
	if r == nil {
		return TimeUnit("")
	}
	return r.Unit
}
